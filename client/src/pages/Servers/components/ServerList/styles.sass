@use "@/common/styles/colors"

$mobile: 768px

.server-list-overlay
  display: none
  position: fixed
  top: var(--title-bar-height, 0)
  left: 0
  right: 0
  bottom: var(--mobile-nav-height, 0)
  background-color: rgba(0, 0, 0, 0.5)
  z-index: 99

  @media (max-width: $mobile)
    display: block

.server-list
  background-color: colors.$lighter-background
  height: 100%
  display: flex
  flex-direction: column
  align-items: center
  position: relative
  border-right: 2px solid colors.$dark-gray
  overflow: hidden

  &.collapsed
    width: 6px
    padding: 0
    border-right-width: 2px
    cursor: e-resize

  &.mobile
    position: fixed
    top: var(--title-bar-height, 0)
    left: 0
    height: calc(var(--content-height, 100%) - var(--mobile-nav-height, 0px))
    width: 85vw !important
    max-width: 320px
    transform: translateX(-100%)
    z-index: 100
    box-shadow: none
    transition: transform 0.3s ease, box-shadow 0.3s ease
    border-right: none

    &.mobile-open
      transform: translateX(0)
      box-shadow: 4px 0 20px rgba(0, 0, 0, 0.3)

  .server-list-inner
    display: flex
    flex-direction: column
    width: 95%
    height: 100%
    overflow: hidden
    padding-right: 1rem
    padding-left: 1rem
    container-type: inline-size

    .search-container
      margin-top: 1rem
      display: flex
      gap: 0.5rem
      align-items: flex-start
      position: relative

      @media (max-width: $mobile)
        margin-top: 0.75rem

      .tag-filter-button
        display: flex
        align-items: center
        justify-content: center
        width: 2.85rem
        height: 2.85rem
        border-radius: 0.7rem
        border: 1px solid colors.$gray
        background-color: colors.$lighter-background
        color: colors.$subtext
        cursor: pointer
        transition: all 0.2s
        position: relative
        flex-shrink: 0

        @media (max-width: $mobile)
          width: 2.55rem
          height: 2.55rem

        svg
          width: 1.4rem
          height: 1.4rem

          @media (max-width: $mobile)
            width: 1.25rem
            height: 1.25rem

        .tag-count
          position: absolute
          top: -4px
          right: -4px
          background-color: colors.$primary
          color: colors.$white
          border-radius: 50%
          width: 16px
          height: 16px
          display: flex
          align-items: center
          justify-content: center
          font-size: 9px
          font-weight: 600

        &:hover
          background-color: colors.$gray
          color: colors.$light-gray

        &.active
          background-color: colors.$primary-opacity
          border-color: colors.$primary
          color: colors.$white

    .servers
      margin-top: 1rem
      display: flex
      flex-direction: column
      gap: 0.2rem
      user-select: none
      flex: 1
      overflow-x: hidden
      overflow-y: auto
      -webkit-overflow-scrolling: touch

      @media (max-width: $mobile)
        margin-top: 0.75rem
        gap: 0.25rem

      &::-webkit-scrollbar
        width: 4px
        height: 4px

      &::-webkit-scrollbar-track
        background: transparent

      &::-webkit-scrollbar-thumb
        background: colors.$gray
        border-radius: 10px

      &::-webkit-scrollbar-thumb:hover
        background: colors.$subtext

      scrollbar-width: thin
      scrollbar-color: colors.$gray transparent

      .truncate-text
        white-space: nowrap
        overflow: hidden
        text-overflow: ellipsis
        max-width: 80%

    .no-servers
      display: flex
      user-select: none
      height: 100%
      flex-direction: column
      justify-content: center
      align-items: center
      color: colors.$subtext

      svg
        width: 5rem
        height: 5rem

      @media (max-width: $mobile)
        svg
          width: 4rem
          height: 4rem

        p
          font-size: 0.9rem
          text-align: center
          padding: 0 1rem

  .resizer
    position: absolute
    right: -4px
    top: 0
    height: 100%
    width: 8px
    background-color: transparent
    cursor: col-resize
    z-index: 10

    @media (max-width: $mobile)
      display: none

    &:hover
      background-color: colors.$primary
  .is-resizing
    background-color: colors.$primary