@use "@/common/styles/colors"

$mobile: 768px
$tablet: 1024px

.users-page
  width: 100%

  .paginated-table .table-header,
  .paginated-table .table-body .table-row
    grid-template-columns: 2fr 1fr 1fr 0.5fr !important

    @media (max-width: $mobile)
      display: flex
      flex-direction: column
      gap: 0.5rem

  .paginated-table .table-header
    @media (max-width: $mobile)
      display: none

  .paginated-table .table-body .table-row
    @media (max-width: $mobile)
      padding: 0.75rem 0.625rem

      .cell
        display: flex
        flex-direction: row
        align-items: center
        gap: 0.5rem

        &[data-label]::before
          content: attr(data-label)
          font-size: 0.7rem
          color: colors.$subtext
          text-transform: uppercase
          font-weight: 600
          min-width: 60px
          flex-shrink: 0

        &.user-cell-wrapper::before
          display: none

        &.actions-cell::before
          display: none

  .users-header
    display: flex
    align-items: center
    justify-content: space-between
    margin-bottom: 1.5rem
    gap: 1rem

    @media (max-width: $mobile)
      flex-direction: column
      align-items: stretch
      gap: 0.75rem
      margin-bottom: 1rem

    h2
      margin: 0
      font-size: 1.3rem
      white-space: nowrap

      @media (max-width: $mobile)
        font-size: 1.15rem

    .header-actions
      display: flex
      align-items: center
      gap: 0.75rem
      flex: 1
      justify-content: flex-end

      @media (max-width: $mobile)
        flex-direction: column-reverse
        width: 100%
        gap: 0.625rem

      .button
        @media (max-width: $mobile)
          width: 100%
          justify-content: center

    .search-box
      display: flex
      align-items: center
      gap: 0.5rem
      background-color: colors.$lighter-background
      border: 1px solid colors.$dark-gray
      border-radius: 0.5rem
      padding: 0.5rem 0.75rem
      transition: border-color 0.15s ease
      flex: 1
      max-width: 280px

      @media (max-width: $mobile)
        max-width: none
        width: 100%
        order: -1

      &:focus-within
        border-color: colors.$primary
        background-color: colors.$dark-gray

      svg
        width: 1.125rem
        height: 1.125rem
        color: colors.$subtext
        flex-shrink: 0

      input
        background: transparent
        border: none
        outline: none
        color: colors.$white
        font-size: 0.9rem
        width: 100%
        min-width: 0

        &::placeholder
          color: colors.$subtext

  .user-cell
    display: flex
    align-items: center
    gap: 0.75rem
    flex: 1
    min-width: 0

    @media (max-width: $mobile)
      gap: 0.625rem

    .user-icon
      display: flex
      align-items: center
      justify-content: center
      width: 2rem
      height: 2rem
      border-radius: 0.375rem
      flex-shrink: 0

      @media (max-width: $mobile)
        width: 2.25rem
        height: 2.25rem

      svg
        width: 1.125rem
        height: 1.125rem

        @media (max-width: $mobile)
          width: 1.25rem
          height: 1.25rem

      &.primary
        background-color: colors.$primary-opacity
        svg
          color: colors.$primary

      &.default
        background-color: colors.$gray
        svg
          color: colors.$subtext

    .user-info
      display: flex
      flex-direction: column
      gap: 0.125rem
      min-width: 0
      flex: 1

      .name
        font-weight: 600
        font-size: 0.9rem
        white-space: nowrap
        overflow: hidden
        text-overflow: ellipsis

        @media (max-width: $mobile)
          font-size: 0.95rem

      .username
        color: colors.$subtext
        font-size: 0.8rem

  .role-badge
    padding: 0.25rem 0.625rem
    border-radius: 0.5rem
    font-size: 0.75rem
    font-weight: 500
    text-transform: capitalize

    @media (max-width: $mobile)
      padding: 0.2rem 0.5rem
      font-size: 0.7rem

    &.admin
      background-color: colors.$primary-opacity
      color: colors.$primary

    &.user
      background-color: colors.$gray
      color: colors.$subtext

  .totp-badge
    display: flex
    align-items: center
    gap: 0.375rem
    padding: 0.25rem 0.5rem
    border-radius: 0.375rem
    font-size: 0.75rem
    font-weight: 500

    @media (max-width: $mobile)
      padding: 0.2rem 0.4rem
      font-size: 0.7rem
      gap: 0.25rem

    svg
      width: 0.875rem
      height: 0.875rem

      @media (max-width: $mobile)
        width: 0.75rem
        height: 0.75rem

    &.enabled
      background-color: colors.$success-opacity
      color: colors.$success

    &.disabled
      background-color: colors.$error-opacity
      color: colors.$error

  .actions-cell
    justify-content: flex-end

    @media (max-width: $mobile)
      position: absolute
      top: 0.625rem
      right: 0.5rem

  .paginated-table .table-body .table-row
    @media (max-width: $mobile)
      position: relative

  .menu-trigger
    width: 1.5rem
    height: 1.5rem
    cursor: pointer
    padding: 0.125rem
    border-radius: 0.25rem
    transition: background-color 0.1s ease
    color: colors.$subtext

    @media (max-width: $mobile)
      width: 1.75rem
      height: 1.75rem
      padding: 0.25rem
      background-color: colors.$gray
      border-radius: 0.375rem

    &:hover
      background-color: colors.$gray
      color: colors.$white